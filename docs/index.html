<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Better factor handling for R • refactor</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">refactor</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="refactor" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#refactor" class="anchor"> </a>refactor</h1></div>

<p><strong>refactor</strong> is an R package which aims to provide better handling of factors. Though R does have a special data type for factors, it isn’t always explicity catered for in commonly used R functions, which can lead to unexpected and undesirable outcomes (e.g. see this <a href="http://www.win-vector.com/blog/2014/09/factors-are-not-first-class-citizens-in-r/">Win-Vector blog post</a>). This observation formed the inspiration for ‘re’-factor: which is essentially to ‘re’-visit functions likely to be used with factor data and where possible to wrap, extend or override them in order to better cater for factor data, or at the very least to provide warnings when the integrity of the data could be compromised by an operation.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>refactor is not available on CRAN but you can easily install the latest development version from github using <code>devtools</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools::<span class="kw">install_github</span>(<span class="st">"jonmcalder/refactor"</span>)</code></pre></div>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"> </a>Overview</h2>
<p>Below are a few examples to illustrate some scenarios in which refactor can improve on base R’s handling of factors.</p>
<p>Please see the vignette for more details: <code><a href="articles/refactor.html">vignette("refactor", package = "refactor")</a></code></p>
<div id="better-factor-creation-with-cfactor" class="section level4">
<h4 class="hasAnchor">
<a href="#better-factor-creation-with-cfactor" class="anchor"> </a>Better factor creation with <code><a href="reference/cfactor.html">cfactor()</a></code>
</h4>
<ul>
<li>get warnings whenever provided factor levels don’t fully match those present in the data</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)
<span class="kw">factor</span>(string, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>))
<span class="co">#&gt; [1] &lt;NA&gt; b    c   </span>
<span class="co">#&gt; Levels: b c d</span>
<span class="kw"><a href="reference/cfactor.html">cfactor</a></span>(string, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>))
<span class="co">#&gt; Warning: the following levels were empty: </span>
<span class="co">#&gt;  d</span>
<span class="co">#&gt; Warning: the following levels were removed: </span>
<span class="co">#&gt;  a</span>
<span class="co">#&gt; [1] &lt;NA&gt; b    c   </span>
<span class="co">#&gt; Levels: b c d</span></code></pre></div>
<ul>
<li>numerical sequences in strings are detected and utilized to obtain correct orderings for factor levels</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hard_to_detect &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"EUR 21 - EUR 22"</span>, <span class="st">"EUR 100 - 101"</span>, <span class="st">"EUR 1 - EUR 10"</span>, <span class="st">"EUR 11 - EUR 20"</span>)
<span class="kw">factor</span>(hard_to_detect, <span class="dt">ordered =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] EUR 21 - EUR 22 EUR 100 - 101   EUR 1 - EUR 10  EUR 11 - EUR 20</span>
<span class="co">#&gt; 4 Levels: EUR 1 - EUR 10 &lt; EUR 100 - 101 &lt; ... &lt; EUR 21 - EUR 22</span>
<span class="kw"><a href="reference/cfactor.html">cfactor</a></span>(hard_to_detect, <span class="dt">ordered =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] EUR 21 - EUR 22 EUR 100 - 101   EUR 1 - EUR 10  EUR 11 - EUR 20</span>
<span class="co">#&gt; 4 Levels: EUR 1 - EUR 10 &lt; EUR 11 - EUR 20 &lt; ... &lt; EUR 100 - 101</span></code></pre></div>
</div>
<div id="extension-of-the-generic-cut-method-to-handle-discrete-integer-data" class="section level4">
<h4 class="hasAnchor">
<a href="#extension-of-the-generic-cut-method-to-handle-discrete-integer-data" class="anchor"> </a>Extension of the generic <code>cut</code> method to handle (discrete) integer data</h4>
<ul>
<li>generate ‘natural’ intervals for factors when using cut on integer vectors
<ul>
<li>e.g. <code>[1,3], [4,6], [7,9]</code> as opposed to <code>(0.5, 3.5], (3.5, 6.5], (6.5, 9.5]</code>
</li>
</ul>
</li>
<li>label factor levels more intuitively
<ul>
<li>e.g. <code>1-3, 4-6, 7-9</code> as opposed to <code>[1,3], [4,6], [7,9], or (0,3], (3,6], (6-9]</code>
</li>
</ul>
</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x_int &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">9</span>
<span class="kw">cut.default</span>(x_int, <span class="dt">breaks =</span> <span class="dv">3</span>)
<span class="co">#&gt; [1] (0.992,3.67] (0.992,3.67] (0.992,3.67] (3.67,6.33]  (3.67,6.33] </span>
<span class="co">#&gt; [6] (3.67,6.33]  (6.33,9.01]  (6.33,9.01]  (6.33,9.01] </span>
<span class="co">#&gt; Levels: (0.992,3.67] (3.67,6.33] (6.33,9.01]</span>
<span class="kw">cut</span>(x_int, <span class="dt">breaks =</span> <span class="dv">3</span>)
<span class="co">#&gt; [1] 1-3 1-3 1-3 4-6 4-6 4-6 7-9 7-9 7-9</span>
<span class="co">#&gt; Levels: 1-3 4-6 7-9</span></code></pre></div>
</div>
<div id="extension-of-the-generic-cut-method-to-handle-non-numeric-ordered-data" class="section level4">
<h4 class="hasAnchor">
<a href="#extension-of-the-generic-cut-method-to-handle-non-numeric-ordered-data" class="anchor"> </a>Extension of the generic <code>cut</code> method to handle (non-numeric) ordered data</h4>
<ul>
<li>
<code>cut</code> usually requires numeric data, but refactor extends <code>cut</code> to handle other ordered data</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">some_letters &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">'d'</span>,<span class="st">'e'</span>,<span class="st">'f'</span>,<span class="st">'a'</span>,<span class="st">'b'</span>,<span class="st">'c'</span>,<span class="st">'g'</span>,<span class="st">'h'</span>,<span class="st">'i'</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)
<span class="kw">cut</span>(some_letters, <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="st">'a'</span>,<span class="st">'c'</span>,<span class="st">'f'</span>,<span class="st">'i'</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>, <span class="dt">ordered_result =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] d-f d-f d-f a-c a-c a-c g-i g-i g-i</span>
<span class="co">#&gt; Levels: a-c &lt; d-f &lt; g-i</span></code></pre></div>
</div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"> </a>Contributions</h2>
<p>Suggestions and feedback are most welcome.</p>
<p>Feel free to <a href="https://github.com/jonmcalder/refactor/issues">open an issue</a> if you want to request a feature or report a bug, and make a pull request if you can contribute.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Lorenz Walthert <br><small class="roles"> Maintainer </small> </li>
<li>Jon Calder <br><small class="roles"> Author </small> </li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#wip"><img src="http://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP ? Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="https://travis-ci.org/jonmcalder/refactor"><img src="https://travis-ci.org/jonmcalder/refactor.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/jonmcalder/refactor"><img src="https://codecov.io/gh/jonmcalder/refactor/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</body></html>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Lorenz Walthert, Jon Calder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
